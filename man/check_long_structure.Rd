% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{check_long_structure}
\alias{check_long_structure}
\title{Check structure of longitudinal data in long format}
\usage{
check_long_structure(data, id_col = "id", time_col = "time")
}
\arguments{
\item{data}{A data frame in long format (one row per observation per subject)}

\item{id_col}{String. Name of the subject identifier column (default: \code{"id"})}

\item{time_col}{String. Name of the time/visit/measurement occasion column (default: \code{"time"})}
}
\value{
A named list with three components:
\describe{
\item{\code{is_properly_sorted}}{Logical. Are rows properly grouped by ID and sorted by time within groups?}
\item{\code{has_no_duplicate_id_time}}{Logical. Are there no duplicate (id, time) combinations?}
\item{\code{classification}}{A tibble with columns \code{variable}, \code{is_time_varying}, \code{status} showing
whether each variable (excluding \code{id_col} and \code{time_col}) is time-varying or time-invariant.}
}
}
\description{
Verifies whether a longitudinal dataset in long format has:
\itemize{
\item one row per time point per subject
\item rows properly grouped and sorted by subject ID and time
\item no duplicate (id, time) combinations
\item classifies remaining variables as time-varying or time-invariant
}
}
\details{
The function:
\enumerate{
\item Converts the ID column to character (if it is a factor). Message is issued
\item Sorts the data by ID and time
\item Checks whether rows with the same ID are consecutive and times are non-decreasing within each ID
\item Detects duplicate (ID, time) pairs
\item Determines which variables vary within subjects (time-varying) vs. are constant per subject (time-invariant)
}
}
\note{
\itemize{
\item The function assumes \code{time_col} is numeric (or something \code{diff()} can handle). If \code{time} is a Date/POSIXct,
consider converting it to numeric days beforehand.
\item Because the package depends on \code{segmented} (which loads \code{MASS}), we deliberately avoid broad preferences
for \code{dplyr::select}. Use explicit \code{dplyr::select()} when needed in your code.
}
}
\examples{
\dontrun{
# Basic usage
data(example_data)
result <- check_long_structure(example_egfr_data)
str(result)
result$classification

}


}
